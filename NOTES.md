Things worth considering changing:

- callback as first arguments in many places
- using `...` too much
- passing output_path only to last element in flow library
- deps of target should be watched even if first build fails
